<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles/css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    />
    <link
      href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
      rel="stylesheet"
    />
    <style>
      .error {
        color: red;
      }
    </style>
    <title>header sample</title>
  </head>
  <body>
    <header>
      <a href="#" class="logo">RP</a>
      <nav class="navbar">
        <div class="btn">
          <i class="fas fa-times close-btn"></i>
        </div>
        <a href="index.html" class="active">Home</a>

        <a href="login.html">Login</a>
      </nav>
      <div class="btn">
        <i class="fas fa-bars menu-btn"></i>
      </div>
    </header>
    <section>
      <div class="post">
        <h1 class="comment-title" id="blogTitle"></h1>
        <div class="blog">
          <div class="image-container">
            <img id="blogImage" alt="" />
          </div>
          <h5 style="font-size: 16px; color: gray" id="blogDate"></h5>
          <p id="blogContent"></p>

          <div class="blog-post-actions">
            <a href="#"
              ><i class="far fa-thumbs-up" style="color: #ffd43b"></i>
              <h4>9 likes</h4>
            </a>
            <a href="#"
              ><i class="far fa-thumbs-down" style="color: #ffd43b"></i>
              <h4>9 dislikes</h4>
            </a>
            <span class="add" onclick="toggleForm()">
              <i class="far fa-comments" style="color: #ffd43b"></i>
            </span>
          </div>
        </div>

        <div id="editor-container">
          <form id="postForm" onsubmit="validateForm(event)">
            <label for="username" style="font-size: 24px">Username:</label>
            <input
              type="text"
              id="username"
              name="username"
              placeholder="add your name here..."
            />
            <span id="usernameError" class="error"></span>

            <label for="content" style="font-size: 24px">Comment:</label>
            <div id="editor">add your commment here...</div>
            <span id="contentError" class="error"></span>

            <button type="submit">Comment</button>
          </form>
        </div>

        <h1 class="comment-title">comments</h1>
        <div class="comments" style.maxHeight="150px">
          <div class="comment">
            <div class="profile-p">
              <img src="images/icons/PersonCircle.png" alt="" />
            </div>
            <div class="commment-contents">
              <h1>Michel Jean Peter <span>Des 15</span></h1>
              <p>
                sapien. Nullam nec sapien in libero accumsan dignissim. Integer
                lacinia, sem ac vehicula vulputate, turpis nunc venenatis justo,
                nec faucibus tortor dui vel elit. Curabitur varius nisi sit amet
                tortor tincidunt ultricies.
              </p>
            </div>
          </div>
          <div class="comment">
            <div class="profile-p">
              <img src="images/icons/PersonCircle.png" alt="" />
            </div>
            <div class="commment-contents">
              <h1>Michel Jean Peter <span>Des 15</span></h1>
              <p>
                sapien. Nullam nec sapien in libero accumsan dignissim. Integer
                lacinia, sem ac vehicula vulputate, turpis nunc venenatis justo,
                nec faucibus tortor dui vel elit. Curabitur varius nisi sit amet
                tortor tincidunt ultricies.
              </p>
            </div>
          </div>
          <div class="comment">
            <div class="profile-p">
              <img src="images/icons/PersonCircle.png" alt="" />
            </div>
            <div class="commment-contents">
              <h1>Michel Jean Peter <span>Des 15</span></h1>
              <p>
                sapien. Nullam nec sapien in libero accumsan dignissim. Integer
                lacinia, sem ac vehicula vulputate, turpis nunc venenatis justo,
                nec faucibus tortor dui vel elit. Curabitur varius nisi sit amet
                tortor tincidunt ultricies.
              </p>
            </div>
          </div>
        </div>

        <div class="see-all">
          <a href="#" onclick="toggleComments()">See all</a>
        </div>
      </div>
    </section>
    <div class="footer">&copy; Prince RWIGIMBA</div>
    <script defer="defer" src="styles/js/script.js"></script>

    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script>
      // Initialize Quill
      var quill = new Quill("#editor", {
        theme: "snow",
        modules: {
          toolbar: [
            ["bold", "italic", "underline", "strike"],
            ["link", "image", "video"],
            ["clean"],
          ],
        },
      });

      function validateForm(event) {
        document.getElementById("usernameError").innerHTML = "";
        document.getElementById("contentError").innerHTML = "";

        var username = document.getElementById("username").value.trim();
        if (username === "") {
          document.getElementById("usernameError").innerHTML =
            "Username is required.";
          event.preventDefault();
        }

        var content = quill.root.innerHTML.trim();
        if (content === "") {
          document.getElementById("contentError").innerHTML =
            "Content is required.";
          event.preventDefault();
        }

        console.log("Username:", username);
        console.log("Content:", content);

        document.getElementById("postForm").reset();
        quill.setText("");
      }
    </script>
    <script>
      // Get the index from the URL parameters
      const urlParams = new URLSearchParams(window.location.search);
      const index = urlParams.get("index");

      // Fetch the blog post content from localStorage based on the index
      const blogs = JSON.parse(localStorage.getItem("blogs"));
      const blog = blogs[index];

      // Set the content of your page elements using the retrieved data
      document.getElementById("blogTitle").textContent = blog.title;
      document.getElementById("blogImage").src = blog.image;
      document.getElementById("blogImage").style.maxWidth = "100%"; // Adjust size if needed
      document.getElementById("blogDate").textContent = `Date: ${blog.date}`;
      document.getElementById("blogContent").innerHTML = blog.content;
    </script>
  </body>
</html>
