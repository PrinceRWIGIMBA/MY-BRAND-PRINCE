<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />

  <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-core.min.js"></script>
  <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-pie.min.js"></script>
    <title>Document</title>
    <link
    href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
    rel="stylesheet"
  />
    <link rel="stylesheet" href="styles/css/admin-sidebar.css" />
    <link rel="stylesheet" href="styles/css/admin-title.css" />
    <link rel="stylesheet" href="styles/css/admin-main.css" />
    <script defer="defer" src="styles/js/main.js"></script>
    <style>
     
        .card-container{
            width: 100%;
            display: flex;
            justify-content: center;

        }
        .card {
          background-color: #f0f0f0;
          padding: 20px 5px;
          border-radius: 10px;
          display: flex;
         justify-content: center;
         align-self:center ;
          width: 50%;
          height: 50%;
          
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
  
        form {
          display: flex;
          flex-direction: column;
          width: 400px;
        }
  
        label {
          margin-bottom: 8px;
        }
  
        input,
        button {
          margin-bottom: 16px;
          padding: 8px;
        }
        button{
            border-radius: 10px;
            margin-top: 10px;
            background-color: antiquewhite;
        }
  
        
        .quill-editor {
          height: 100px;
          background:#fff;
        }
        
        .error-container {
          color: red;
        }
        
        .error-summary {
          color: red;
          margin-top: 10px;
        }
      </style>
</head>

<body>

    <body>
        <div class="header">
            <div class="left-section">
                <span class="logo">RP</span>
                <div class="btn" onclick="toggleSidebar()">
                  <i class="fas fa-bars menu-btn"></i>
                </div>
            </div>
            <div class="middle-section">
                <div class="search-bar">
                    <input type="text" placeholder="Search..." name="search" />
                </div>
            </div>
            <div class="right-section">
                <div class="notification-icons">
                    <img src="images/icons/Envelope.png" alt="" />
                    <img src="images/icons/nitifications.png" alt="" />
                </div>
                <div class="username">Prince Rwigimba</div>
                <div class="user-pic">
                    <img src="images/icons/PersonCircle.png" alt="" />
                </div>
            </div>
        </div>

        <div class="sidebar-container">
            <div class="sidebar">
                <a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                <a href="blogs.html"><i class="fas fa-blog"></i> Blogs</a>
                <a href="messages.html"><i class="fas fa-envelope"></i> Messages</a>
                <a href="profile.html"><i class="fa fa-address-card"></i> Profile</a>
            </div>
            <div class="logout-icon">
                <a href=""><i class="fas fa-sign-out-alt"></i>Logout</a>
                <p>&copy; Prince RWIGIMBA</p>
            </div>
        </div>

        <main>
            <div class="text-center">
                <h1>Create Blog/Edit Blog </h1>
            </div>
            <div class="card-container">
                <div class="card">
                  <form
                  id="blogForm"
                  action="blogback.php"
                  method="post"
                  enctype="multipart/form-data"
                >
                  <label for="title">Title:</label>
                  <input type="text" id="title" name="title" placeholder="add the title here..."/>
                  <div class="error-container" id="title-error"></div>
            
                  <label for="image">Image:</label>
                  <input type="file" id="image" name="image" accept="image/*" />
                  <div class="error-container" id="image-error"></div>
            
                  <label for="content">Content:</label>
                  <div id="quill-editor" class="quill-editor"></div>
                  <div class="error-container" id="content-error"></div>
            
                  <button type="submit" onclick="submitForm()">Submit</button>
             
                
                </form>
                  </div>
            </div>
          
           
        </main>



   <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

<script>

  var quill = new Quill("#quill-editor", {
    theme: "snow",
    showCharCount: true,
    maxLength: 100,
    placeholder: 'Type content here...',
  });

  

  const titleEl = document.querySelector("#title");
  const imageEl = document.querySelector("#image");
  const contentEl =quill.root.innerText;
  const form = document.querySelector("#blogForm");

  const isRequired = (value) => (value.trim() === "" ? false : true);

  const checkTitle = () => {
    
    let valid = false;
    const title = titleEl.value.trim();

    if (!isRequired(title)) {
      showError(titleEl, "Title cannot be blank.");
    } else {
      showSuccess(titleEl);
      valid = true;
    }

    return valid;
  };

  const checkImage = () => {
    let valid = false;

    const image = imageEl.value.trim();

    if (!isRequired(image)) {
      showError(imageEl, "Image cannot be blank.");
    } else {
      showSuccess(imageEl);
      valid = true;
    }

    return valid;
  };

  const checkContent = () => {
    let valid = false;
  
    const content = contentEl.trim();
  
    if (!isRequired(content)) {
      showError(contentEl, "Content cannot be blank.");
    } else {
      showSuccess(contentEl);
      valid = true;
    }
  
    return valid;
  };

  const showError = (element, message) => {
    const formField = element.parentElement;
  
    
    const actualFormField = formField || element;
  
    actualFormField.classList.remove("success");
    actualFormField.classList.add("error");
  
    const errorContainerId = element.id + "-error";
    let errorContainer = document.getElementById(errorContainerId);
  
    
    if (!errorContainer) {
      errorContainer = document.createElement('div');
      errorContainer.id = errorContainerId;
  
      if (formField) {
        formField.appendChild(errorContainer);
      } else {
     
        element.parentNode.insertBefore(errorContainer, element.nextSibling);
      }
    }
  
    errorContainer.textContent = message;
  };


  const showSuccess = (input) => {
    const formField = input.parentElement;

    formField.classList.remove("error");
    formField.classList.add("success");

    const errorContainerId = input.id + "-error";
    const errorContainer = document.getElementById(errorContainerId);

    errorContainer.textContent = "";
  };

  form.addEventListener("submit", function (e) {
    e.preventDefault();

   
    const errorSummary = document.getElementById("error-summary");
    errorSummary.innerHTML = "";

   
    let isTitleValid = checkTitle();
    let isImageValid = checkImage();
    let isContentValid = checkContent();

    let isFormValid = isTitleValid && isImageValid && isContentValid;

    if (!isFormValid) {
    
      errorSummary.scrollIntoView({ behavior: "smooth" });
    } else {
      
    }
  });
 // get the data from form 

 function submitForm() {
  
  var titleInputValue = document.getElementById('title').value;

  var imageInput = document.getElementById('image');
  var imageFile = imageInput.files[0];

  
  var quillContent = quill.root.innerHTML;


  if (titleInputValue.trim() === '') {
    document.getElementById('title-error').innerText = 'Title cannot be empty.';
    return;
  } else {
    document.getElementById('title-error').innerText = '';
  }

 
  document.getElementById('image-error').innerText = '';
  document.getElementById('content-error').innerText = '';

 
  var formData = new FormData();
  formData.append('title', titleInputValue);
  formData.append('image', imageFile);
  formData.append('content', quillContent);

  for (var pair of formData.entries()) {
    console.log(pair[0] + ', ' + pair[1]);
  }

 
}

</script>
</body>
</html>














